import{r as g,o as t,a as l,b as s,Q as C,d as S,w as i,e as I,F as p,f as y,g as n,h,i as w,j as V,k as u,t as c,l as _,m as b,n as v,p as E,q as k,s as F}from"./index-CGBpvbyO.js";import{i as Q,e as q}from"./Utils-CthVdXES.js";import{s as N}from"./entities.schema-BIvvBduX.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={setup(){const e=g(""),r=g(null);let o=g(null);return o=new FileReader,o.onload=function(){if(console.log(o.result),o.result)try{const m=JSON.parse(o.result);localStorage.setItem("entities",JSON.stringify(m))}catch(m){console.log(m)}},o.onerror=function(){console.log(o.error)},{filter:e,filterRef:r,reader:o,resetFilter(){e.value="",r.value.focus()}}},data(){return{entities:[],id:null}},beforeMount(){localStorage.getItem("entities")&&(this.entities=JSON.parse(localStorage.getItem("entities")),this.validateCurrentEntities())},created(){let e=new URLSearchParams(window.location.search);this.id=e.get("id")},methods:{clearEntities(){localStorage.removeItem("entities"),window.location.reload()},updateFile(e){this.reader.readAsText(e),window.location.reload()},filteredCount(){return this.entities.entities.filter(e=>e.name.toLowerCase().includes(this.filter.toLowerCase())).length},validateCurrentEntities(){const e=Q(this.entities,N);e!==null&&(q("Entities are not valid: "+e),localStorage.removeItem("entities"))}}},$=n("div",{class:"q-pa-md"},[n("h4",{class:"text-subtitle",style:{margin:"0 10px 10px 0"}},"Entities"),n("p",{class:"text-body1"}," This is a list of all entities from your project. You can filter the list by typing in the input field below. ")],-1),J={key:0,class:"q-ma-md"},B=n("p",{class:"text-body1"},[h(" You can upload a JSON file containing entities. The file should have the following format ("),n("a",{href:"/entities/schema"},"JSON schema"),h("): ")],-1),O=n("pre",null,`      {
        "entities": [
          {
            "name": "Entity name",
            "instances": [
              {
                "identifier": "Instance identifier",
                "from_file": "File name",
                "description": "Instance description",
                "properties": [
                  {
                    "name": "Property name",
                    "description": "Property description"
                  }
                ]
              }
            ]
          }
        ]
      }
    `,-1),P={key:1,class:"q-ma-md"},U=n("p",null,"No entities found",-1),z=[U],R={key:2},T={key:1,style:{"font-size":"16px"}},j={class:"q-pa-md example-row-all-breakpoints"},Y={class:"row",style:{"font-style":"italic"}},A={class:"col",style:{"font-weight":"bold"}},D={key:0,class:"row"},M={class:"col"},G={class:"row",style:{"margin-top":"10px"}},H={class:"col"},K={key:0};function W(e,r,o,m,ee,te){return t(),l(p,null,[$,e.entities.entities?e.entities.entities.length===0?(t(),l("div",P,z)):(t(),l("div",R,[s(S,{color:"primary",label:"Clear entities",class:"q-ml-md",onClick:e.clearEntities},null,8,["onClick"]),s(I,{ref:"filterRef",filled:"",modelValue:e.filter,"onUpdate:modelValue":r[0]||(r[0]=d=>e.filter=d),label:"Filter",class:"q-ma-md"},{append:i(()=>[e.filter!==""?(t(),w(V,{key:0,name:"clear",class:"cursor-pointer",onClick:e.resetFilter},null,8,["onClick"])):u("",!0),e.entities.entities?(t(),l("div",T," Found "+c(e.filteredCount())+" entities ",1)):u("",!0)]),_:1},8,["modelValue"]),(t(!0),l(p,null,y(e.entities.entities,d=>(t(),l("div",{key:d.name},[d.name.toLowerCase().includes(e.filter.toLowerCase())?(t(),w(k,{key:0,flat:"",bordered:"",class:"q-ma-md"},{default:i(()=>[s(v,null,{default:i(()=>[s(_,null,{default:i(()=>[s(b,{label:d.name,"header-class":"text-h6",dense:"","switch-toggle-side":"",style:{"font-size":"16px"}},{default:i(()=>[s(v,null,{default:i(()=>[s(_,null,{default:i(()=>[s(E,{bordered:"",class:"rounded-borders",style:{margin:"10px 0"},separator:""},{default:i(()=>[(t(!0),l(p,null,y(d.instances,a=>(t(),w(v,{key:a.identifier},{default:i(()=>[s(_,null,{default:i(()=>[n("div",j,[n("div",Y,[n("div",A,c(a.identifier),1),h(" "+c(a.from_file),1)]),a.description?(t(),l("div",D,[n("div",M,"( "+c(a.description)+" )",1)])):u("",!0),n("div",G,[n("div",H,[s(k,{flat:"",bordered:""},{default:i(()=>[s(b,{label:`Properties ( ${a.properties.length} )`,dense:"","switch-toggle-side":"",style:{"font-size":"16px"},"content-inset-level":1},{default:i(()=>[s(F),(t(!0),l(p,null,y(a.properties,f=>(t(),l("div",{key:f.name},[s(_,null,{default:i(()=>[h(c(f.name)+" ",1),f.description?(t(),l("span",K," ( "+c(f.description)+" ) ",1)):u("",!0)]),_:2},1024)]))),128))]),_:2},1032,["label"])]),_:2},1024)])])])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["label"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):u("",!0)]))),128))])):(t(),l("div",J,[B,O,s(C,{"onUpdate:modelValue":e.updateFile,clearable:"",filled:"",label:"Upload",class:"q-ma-md"},null,8,["onUpdate:modelValue"])]))],64)}const X=x(L,[["render",W]]),Z={class:"q-pa-md"},oe={__name:"EntityVisualizationView",setup(e){return(r,o)=>(t(),l("main",Z,[s(X)]))}};export{oe as default};
